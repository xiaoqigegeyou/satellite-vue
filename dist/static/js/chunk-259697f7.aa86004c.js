(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-259697f7"],{"7db3":function(e,t,a){},bfd6:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-card",{attrs:{shadow:"always"}},[a("el-date-picker",{attrs:{size:"small",type:"daterange","value-format":"timestamp","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.dateValues,callback:function(t){e.dateValues=t},expression:"dateValues"}}),e._v("\n          \n      "),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:e.reverseMessage}},[e._v("查找")])],1)],1)},r=[],s={data:function(){return{dateValues:""}},methods:{reverseMessage:function(){this.$emit("getDate",this.dateValues)}}},i=s,o=a("2877"),l=Object(o["a"])(i,n,r,!1,null,null,null);t["a"]=l.exports},cfda:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",[a("el-col",{attrs:{span:3}},[a("el-aside",{staticStyle:{"background-color":"#fff",height:"650px","overflow-x":"hidden"},attrs:{width:"96%"}},[a("el-menu",{attrs:{"default-openeds":["1"],"default-active":"all"},on:{select:e.menuSlect}},[a("el-submenu",{attrs:{index:"1"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-message"}),e._v("集群节点")]),a("el-menu-item",{attrs:{index:"all"}},[e._v("全部节点")]),e._l(e.nodeList,(function(t){return a("el-menu-item",{key:t.id,attrs:{index:t.domain}},[e._v(e._s(t.name))])}))],2)],1)],1)],1),a("el-col",{attrs:{span:20}},[a("DatePicker",{on:{getDate:e.getDate}}),a("el-row",{staticClass:"top"},[a("div",{staticClass:"block"},[a("chart",{directives:[{name:"loading",rawName:"v-loading",value:e.loading1,expression:"loading1"}],ref:"nodeJob",attrs:{options:e.nodeJob,"auto-resize":!0}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading2,expression:"loading2"}],staticStyle:{width:"100%"},attrs:{data:e.tableData.slice((e.currentPage-1)*e.pageSize,e.currentPage*e.pageSize),"default-sort":e.tableSort},on:{"sort-change":e.tableSortChangeHandle}},[a("el-table-column",{attrs:{prop:"jobId",label:"JobId",width:"200px"}}),a("el-table-column",{attrs:{prop:"taskID",label:"TaskId"}}),a("el-table-column",{attrs:{prop:"taskName",label:"TaskName"}}),a("el-table-column",{attrs:{prop:"node",label:"运行节点"}}),a("el-table-column",{attrs:{prop:"startTime",label:"开始时间",sortable:"custom"}}),a("el-table-column",{attrs:{prop:"endTime",label:"结束时间",sortable:"custom"}}),a("el-table-column",{attrs:{prop:"runTime",label:"运行时间(S)",sortable:"custom"}})],1),a("div",{staticClass:"block",staticStyle:{"margin-top":"15px"}},[a("el-pagination",{attrs:{align:"center","current-page":e.currentPage,"page-sizes":[7,15,20],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)],1)],1)},r=[],s=(a("55dd"),a("ac6a"),a("96cf"),a("1da1")),i=(a("ef97"),a("bfd6")),o={data:function(){return{tableData:[],currentPage:1,total:20,pageSize:7,nodeList:[],queryDate:[],queryNode:"all",loading1:!0,loading2:!0,steps:[],nodeJob:{title:{text:"任务数量统计",left:"center"},tooltip:{trigger:"item",formatter:"{b} : {c}"},xAxis:{type:"category",data:[]},yAxis:{type:"value"},series:[{data:[],type:"line"}]},tableSort:{prop:"startTime",order:"descending"}}},methods:{getDate:function(e){null!=e&&2==e.length?(this.queryDate[0]=e[0],this.queryDate[1]=e[1]+864e5-1):this.setDefaultDate(),console.log(this.queryDate),this.currentPage=1,this.getNodeAmount(),this.getNodePage()},handleSizeChange:function(e){console.log("每页 ".concat(e," 条")),this.currentPage=1,this.pageSize=e},handleCurrentChange:function(e){console.log("当前页: ".concat(e)),this.currentPage=e},setDefaultDate:function(){var e=new Date(new Date((new Date).toLocaleDateString()).getTime()+864e5-1),t=Date.parse(e),a=Date.parse(new Date(e.getTime()-6048e5+1));this.queryDate=[a,t]},menuSlect:function(e){this.queryNode=e,this.currentPage=1,this.getNodeAmount(),this.getNodePage()},getAllNodeList:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("NodeJob/allNode");case 2:t=e.sent,a=t.data,this.nodeList=a;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getNodeAmount:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a,n,r,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading1=!0,t={startTime:this.queryDate[0],endTime:this.queryDate[1]},"all"!==this.queryNode&&(t.node=this.queryNode),e.next=5,this.$http.get("NodeJob/JobAmount",{params:t});case 5:for(a=e.sent,n=a.data,console.log(n),r=[],s=[],i=0;i<n.length;i++)r.push(n[i].day),s.push(n[i].amount);this.nodeJob.xAxis.data=r,this.nodeJob.series[0].data=s,this.loading1=!1;case 14:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getNodePage:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a,n,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading2=!0,t={startTime:this.queryDate[0],endTime:this.queryDate[1],pageNo:this.currentPage,pageSize:this.pageSize},"all"!==this.queryNode&&(t.node=this.queryNode),e.next=5,this.$http.get("NodeJob/AllNodeJobPage",{params:t});case 5:a=e.sent,n=a.data,this.total=n.total,n.list.forEach((function(e){e.taskName=r.getStepName(e.taskName),e.runTime=(e.runTime/1e3).toFixed(2)})),console.log(n.list),this.tableData=n.list,this.loading2=!1;case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getSteps:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("StepConfig/AllStep");case 2:t=e.sent,a=t.data,this.steps=a;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getStepName:function(e){for(var t=parseInt(e),a=0;a<this.steps.length;a++)if(t===this.steps[a].id)return this.steps[a].step_name},tableSortChangeHandle:function(e){if(console.log(e),"runTime"===e.prop){if("descending"===e.order)return void this.tableData.sort((function(e,t){return parseFloat(t.runTime)-parseFloat(e.runTime)}));if("ascending"===e.order)return void this.tableData.sort((function(e,t){return parseFloat(e.runTime)-parseFloat(t.runTime)}))}else if("endTime"===e.prop){if("descending"===e.order)return void this.tableData.sort((function(e,t){return Date.parse(t.endTime)-Date.parse(e.endTime)}));if("ascending"===e.order)return void this.tableData.sort((function(e,t){return Date.parse(e.endTime)-Date.parse(t.endTime)}))}else if("startTime"===e.prop){if("descending"===e.order)return void this.tableData.sort((function(e,t){return Date.parse(t.startTime)-Date.parse(e.startTime)}));if("ascending"===e.order)return void this.tableData.sort((function(e,t){return Date.parse(e.startTime)-Date.parse(t.startTime)}))}this.tableData.sort((function(e,t){return(""+e.jobId).localeCompare(t.jobId)}))}},components:{DatePicker:i["a"]},mounted:function(){this.getAllNodeList(),this.setDefaultDate(),this.getNodeAmount(),this.getSteps(),this.getNodePage()}},l=o,u=(a("d337"),a("2877")),c=Object(u["a"])(l,n,r,!1,null,"761e2c1b",null);t["default"]=c.exports},d337:function(e,t,a){"use strict";a("7db3")}}]);