(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ea913ef8"],{3753:function(e,t,a){},"3a49":function(e,t,a){"use strict";a("86ee")},"3fae":function(e,t,a){},"4b3c":function(e,t,a){},5176:function(e,t,a){"use strict";a("7bc5")},"5d59":function(e,t,a){"use strict";a("3fae")},"7b17":function(e,t,a){"use strict";a("ad17")},"7bc5":function(e,t,a){},8617:function(e,t,a){"use strict";a("3753")},"86ee":function(e,t,a){},"924a":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-card",{attrs:{shadow:"always"}},[a("el-date-picker",{attrs:{size:"small",type:"daterange","value-format":"timestamp","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.dateValues,callback:function(t){e.dateValues=t},expression:"dateValues"}}),e._v("\n         \n    "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.step,callback:function(t){e.step=t},expression:"step"}},[a("el-option",{attrs:{value:"-1",label:"全部步骤"}}),e._l(e.stepList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.step_name,value:e.id}})}))],2),e._v("\n         \n    "),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:e.reverseMessage}},[e._v("查找")]),e._v("\n       \n    "),a("el-button",{attrs:{type:"success",size:"small",icon:"el-icon-tickets"},on:{click:e.handleSeeReport}},[e._v("查看分析报告")])],1)],1)},s=[],o=(a("96cf"),a("1da1")),r={data:function(){return{stepList:[],dateValues:"",step:""}},mounted:function(){this.getStepsListData()},methods:{handleSeeReport:function(){this.$emit("handleSeeReport")},reverseMessage:function(){this.$emit("getDate",this.dateValues,this.step)},getStepsListData:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("StepConfig/AllStep");case 2:t=e.sent,a=t.data,console.log(a),this.stepList=a,this.step="-1";case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},watch:{step:function(e,t){this.$emit("handlePPStep",e)}}},i=r,l=a("2877"),c=Object(l["a"])(i,n,s,!1,null,null,null);t["a"]=c.exports},a017:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-card",{attrs:{shadow:"always"}},[a("el-date-picker",{attrs:{size:"small",type:"daterange","value-format":"timestamp","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.dateValues,callback:function(t){e.dateValues=t},expression:"dateValues"}}),e._v("\n         \n    "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.step,callback:function(t){e.step=t},expression:"step"}},[a("el-option",{attrs:{value:"-1",label:"全部省份"}}),e._l(e.stepList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.province_name,value:e.code}})}))],2),e._v("\n         \n    "),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:e.reverseMessage}},[e._v("查找")]),e._v("\n        \n    "),a("el-button",{attrs:{type:"success",size:"small",icon:"el-icon-tickets"},on:{click:e.handleSeeReport}},[e._v("查看分析报告")])],1)],1)},s=[],o=(a("96cf"),a("1da1")),r={data:function(){return{stepList:[],dateValues:"",step:""}},mounted:function(){this.getStepsListData()},methods:{handleSeeReport:function(){this.$emit("handleSeeReport")},reverseMessage:function(){this.$emit("getDate",this.dateValues,this.step)},getStepsListData:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("ProvinceConfig/AllProvinceInfo");case 2:t=e.sent,a=t.data,console.log(a),this.stepList=a,this.step="-1";case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},i=r,l=a("2877"),c=Object(l["a"])(i,n,s,!1,null,null,null);t["a"]=c.exports},aa84:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-drawer",{staticStyle:{height:"100vh"},attrs:{title:e.title,visible:e.visible,direction:"rtl","show-close":!1},on:{"update:visible":function(t){e.visible=t}}},[a("div",{staticClass:"content",domProps:{innerHTML:e._s(e.content)}})])],1)},s=[],o={data:function(){return{visible:this.drawer_visible}},props:["title","content","drawer_visible"],methods:{handleClose:function(e){e()}},watch:{drawer_visible:function(e,t){this.visible=e},visible:function(e,t){this.$emit("updateReportVisable",e)}}},r=o,i=(a("7b17"),a("2877")),l=Object(i["a"])(r,n,s,!1,null,null,null);t["a"]=l.exports},ad17:function(e,t,a){},ad73:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"单节点",name:"first",lazy:!0}},[a("SingleNode")],1),a("el-tab-pane",{attrs:{label:"任务步骤",name:"second",lazy:!0}},[a("Steps")],1),a("el-tab-pane",{attrs:{label:"省市",name:"third",lazy:!0}},[a("Province")],1),a("el-tab-pane",{attrs:{label:"卫星",name:"fourth",lazy:!0}},[a("Satellite")],1)],1)],1)},s=[],o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",[a("el-col",{attrs:{span:3}},[a("el-aside",{staticStyle:{"background-color":"#fff",height:"650px","overflow-x":"hidden"},attrs:{width:"96%"}},[a("el-menu",{attrs:{"default-openeds":["1"],"default-active":"all"},on:{select:e.menuSlect}},[a("el-submenu",{attrs:{index:"1"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-message"}),e._v("集群节点")]),a("el-menu-item",{attrs:{index:"all"}},[e._v("全部节点")]),e._l(e.nodeList,(function(t){return a("el-menu-item",{key:t.id,attrs:{index:t.domain}},[e._v(e._s(t.name))])}))],2)],1)],1)],1),a("el-col",{attrs:{span:20}},[a("DatePicker",{on:{getDate:e.getDate,handleSeeReport:e.handleSeeReport}}),a("el-row",{staticClass:"top"},[a("el-col",{attrs:{span:19}},[a("div",{staticClass:"block"},[a("chart",{directives:[{name:"loading",rawName:"v-loading",value:e.loading1,expression:"loading1"}],ref:"nodeJob",attrs:{options:e.nodeJob,"auto-resize":!0}})],1)]),a("el-col",{attrs:{span:5}},[a("SuccessRateTable",{attrs:{tableList:e.tableList}}),"all"==e.queryNode?a("el-switch",{staticClass:"seemode",attrs:{"active-text":"节点总览","inactive-text":"分节点查看"},model:{value:e.seeMode,callback:function(t){e.seeMode=t},expression:"seeMode"}}):e._e()],1)],1)],1)],1),a("Report",{attrs:{title:e.report_title,content:e.report_content,drawer_visible:e.report_visible},on:{updateReportVisable:e.updateReportVisable}})],1)},r=[],i=(a("ac6a"),a("96cf"),a("1da1")),l=(a("ef97"),a("94b1"),a("d72c")),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{attrs:{shadow:"hover"}},[a("el-table",{attrs:{data:e.tableList,stripe:"",height:"520"}},[a("el-table-column",{attrs:{prop:"day",label:""}}),a("el-table-column",{attrs:{prop:"amount",label:"成功率(%)",sortable:""}})],1)],1)},d=[],u={props:["tableList"],data:function(){return{}}},p=u,h=a("2877"),b=Object(h["a"])(p,c,d,!1,null,"467cfdc9",null),m=b.exports,v=a("aa84"),f={data:function(){return{report_title:"分析报告",report_content:"",report_visible:!1,seeMode:!0,tableList:[],nodeList:[],queryDate:[],queryNode:"all",loading1:!1,nodeJob:{title:{text:"任务成功率统计",left:"center"},tooltip:{trigger:"item",formatter:"{b} : {c}%"},xAxis:{name:"日期",type:"category",data:[]},yAxis:{name:"成功率(%)",type:"value"},series:[{data:[],type:"line"}]}}},components:{DatePicker:l["a"],SuccessRateTable:m,Report:v["a"]},mounted:function(){this.setDefaultDate(),this.getAllNodeList()},methods:{getAllNodeList:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("NodeJob/allNode");case 2:t=e.sent,a=t.data,this.nodeList=a,this.getNodeData(this.queryNode);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getNodeData:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,n,s,o,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading1=!0,a={startTime:this.queryDate[0],endTime:this.queryDate[1],node:t,seeMode:this.seeMode},e.next=4,this.$http.get("successRate/singleNode",{params:a});case 4:for(n=e.sent,s=n.data,console.log(s),s.forEach((function(e){e.amount*=100,e.amount=e.amount.toFixed(2)})),this.tableList=s,o=[],r=[],i=0;i<s.length;i++)o.push(s[i].day),r.push(s[i].amount);this.seeMode||"all"!=this.queryNode?(this.nodeJob.xAxis.name="日期",this.nodeJob.series[0].type="line"):(this.nodeJob.xAxis.name="节点",this.nodeJob.series[0].type="bar"),this.nodeJob.xAxis.data=o,this.nodeJob.series[0].data=r,this.loading1=!1;case 16:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),menuSlect:function(e){this.queryNode=e,this.getNodeData(this.queryNode)},getDate:function(e){null!=e&&2==e.length?(this.queryDate[0]=e[0],this.queryDate[1]=e[1]+864e5-1):this.setDefaultDate(),console.log(this.queryDate),this.getNodeData(this.queryNode)},setDefaultDate:function(){var e=new Date(new Date((new Date).toLocaleDateString()).getTime()+864e5-1),t=Date.parse(e),a=Date.parse(new Date(e.getTime()-2592e6+1));this.queryDate=[a,t]},handleSeeReport:function(){"all"!=this.queryNode||this.seeMode?this.generateReport():this.generatePerNodeReport(),this.report_visible=!0},generatePerNodeReport:function(){var e=new Date(this.queryDate[0]).format("yyyy-MM-dd"),t=new Date(this.queryDate[1]).format("yyyy-MM-dd"),a=this.queryNode;"all"===a&&(a="全部节点");var n=this.nodeJob.xAxis.data,s=this.nodeJob.series[0].data;console.log(s);var o=parseFloat((s.reduce((function(e,t){return parseFloat(e)+parseFloat(t)}),0)/s.length).toFixed(2)),r={node:n[0],amount:s[0]},i={node:n[0],amount:s[0]},l=[];s.forEach((function(e,t){if(e=parseFloat(e),e>r.amount&&(r.node=n[t],r.amount=e),e<i.amount&&(i.node=n[t],i.amount=e),e<90){var a={node:n[t],amount:e};l.push(a)}}));var c='<div style="color:#30475e;">查询时间：<b>'.concat(e,"</b> 至 <b>").concat(t,"</b></div>\n        <br/>\n        <div>查询节点：<b>").concat(a,"</b></div>\n        <br/>");c+='<div>平均成功率为：<span style="color:red"><b>'.concat(o,' %</b></span></div>\n        <br/>\n        <div>成功率最高的节点为<span style="color:green"><b>').concat(r.node,'</b></span>\n        ：<span style="color:green"><b>').concat(r.amount,' %</b></span></div>\n        <br/>\n        <div>成功率最低的节点为<span style="color:red"><b>').concat(i.node,'</b></span>\n        ：<span style="color:red"><b>').concat(i.amount," %</b></span></div>\n        <br/>\n        <div>可能需要注意的节点如下（成功率低于90%）：</div>\n        "),l.forEach((function(e){c+='<br/><div><span style="color:red"><b>'.concat(e.node,":").concat(e.amount,"%</b></span></div>")})),this.report_content=c},generateReport:function(){var e=new Date(this.queryDate[0]).format("yyyy-MM-dd"),t=new Date(this.queryDate[1]).format("yyyy-MM-dd"),a=this.queryNode;"all"===a&&(a="全部节点");var n=this.nodeJob.xAxis.data,s=this.nodeJob.series[0].data,o=parseFloat((s.reduce((function(e,t){return parseFloat(e)+parseFloat(t)}),0)/s.length).toFixed(2)),r={node:n[0],amount:s[0]},i={node:n[0],amount:s[0]},l=[];s.forEach((function(e,t){if(e=parseFloat(e),e>r.amount&&(r.node=n[t],r.amount=e),e<i.amount&&(i.node=n[t],i.amount=e),e<90){var a={node:n[t],amount:e};l.push(a)}}));var c='<div style="color:#30475e;">查询时间：<b>'.concat(e,"</b> 至 <b>").concat(t,"</b></div>\n        <br/>\n        <div>查询节点：<b>").concat(a,"</b></div>\n        <br/>");c+='<div>平均成功率为：<span style="color:red"><b>'.concat(o,' %</b></span></div>\n        <br/>\n        <div>成功率最高的日期为<span style="color:green"><b>').concat(r.node,'</b></span>\n        ：<span style="color:green"><b>').concat(r.amount,' %</b></span></div>\n        <br/>\n        <div>成功率最低的日期为<span style="color:red"><b>').concat(i.node,'</b></span>\n        ：<span style="color:red"><b>').concat(i.amount," %</b></span></div>\n        <br/>\n        <div>可能需要注意的日期如下（成功率低于90%）：</div>\n        "),l.forEach((function(e){c+='<br/><div><span style="color:red"><b>'.concat(e.node,":").concat(e.amount,"%</b></span></div>")})),this.report_content=c},updateReportVisable:function(e){this.report_visible=e}},watch:{seeMode:function(){this.getNodeData(this.queryNode)}}},y=f,g=(a("5d59"),Object(h["a"])(y,o,r,!1,null,"ed8ac7a8",null)),D=g.exports,x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",[a("el-col",{attrs:{span:3}},[a("el-aside",{staticStyle:{"background-color":"#fff",height:"650px","overflow-x":"hidden"},attrs:{width:"96%"}},[a("el-menu",{class:e.nodeSelectDisabled?"disabled-menu":"",attrs:{"default-openeds":["1"],"default-active":"all"},on:{select:e.menuSlect}},[a("el-submenu",{attrs:{index:"1"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-message"}),e._v("集群节点")]),a("el-menu-item",{attrs:{index:"all"}},[e._v("全部节点")]),e._l(e.nodeList,(function(t){return a("el-menu-item",{key:t.id,attrs:{index:t.domain}},[e._v(e._s(t.name))])}))],2)],1)],1)],1),a("el-col",{attrs:{span:20}},[a("DatePicker",{on:{getDate:e.getDate,handlePPStep:e.handlePPStep,handleSeeReport:e.handleSeeReport}}),a("el-row",{staticClass:"top"},[a("el-col",{attrs:{span:19}},[a("div",{staticClass:"block"},[a("chart",{directives:[{name:"loading",rawName:"v-loading",value:e.loading1,expression:"loading1"}],ref:"nodeJob",attrs:{options:e.nodeJob,"auto-resize":!0}})],1)]),a("el-col",{attrs:{span:5}},[a("SuccessRateTable",{attrs:{tableList:e.tableList}}),-1==e.stepId?a("el-switch",{staticClass:"seemode",attrs:{"active-text":"步骤总览","inactive-text":"分步骤查看"},model:{value:e.seeMode,callback:function(t){e.seeMode=t},expression:"seeMode"}}):e._e()],1)],1)],1)],1),a("Report",{attrs:{title:e.report_title,content:e.report_content,drawer_visible:e.report_visible},on:{updateReportVisable:e.updateReportVisable}})],1)},_=[],w=a("924a"),R={data:function(){return{report_title:"分析报告",report_content:"",report_visible:!1,seeMode:!0,tableList:[],nodeList:[],queryDate:[],queryNode:"all",stepId:-1,loading1:!1,nodeSelectDisabled:!1,nodeJob:{title:{text:"任务成功率统计",left:"center"},tooltip:{trigger:"item",formatter:"{b} : {c}%"},xAxis:{name:"日期",type:"category",data:[]},yAxis:{name:"成功率(%)",type:"value"},series:[{data:[],type:"line"}]}}},mounted:function(){this.setDefaultDate(),this.getAllNodeList()},methods:{handlePPStep:function(e){this.nodeSelectDisabled=!(e>4||-1==e)},getDate:function(e,t){null!=e&&2==e.length?(this.queryDate[0]=e[0],this.queryDate[1]=e[1]+864e5-1):this.setDefaultDate(),this.stepId=t,this.getStepsData(this.queryNode)},getAllNodeList:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("NodeJob/allNode");case 2:t=e.sent,a=t.data,this.nodeList=a,this.getStepsData(this.queryNode);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),menuSlect:function(e){this.queryNode=e,this.getStepsData(this.queryNode)},setDefaultDate:function(){var e=new Date(new Date((new Date).toLocaleDateString()).getTime()+864e5-1),t=Date.parse(e),a=Date.parse(new Date(e.getTime()-2592e6+1));this.queryDate=[a,t]},getStepsData:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,n,s,o,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading1=!0,a={startTime:this.queryDate[0],endTime:this.queryDate[1],node:t,stepId:this.stepId,seeMode:this.seeMode},e.next=4,this.$http.get("successRate/steps",{params:a});case 4:for(n=e.sent,s=n.data,console.log(s),s.forEach((function(e){e.amount*=100,e.amount=e.amount.toFixed(2)})),this.tableList=s,o=[],r=[],i=0;i<s.length;i++)o.push(s[i].day),r.push(s[i].amount);this.nodeJob.xAxis.data=o,this.nodeJob.series[0].data=r,this.seeMode||-1!=this.stepId?(this.nodeJob.xAxis.name="日期",this.nodeJob.series[0].type="line"):(this.nodeJob.xAxis.name="步骤",this.nodeJob.series[0].type="bar"),this.loading1=!1;case 16:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleSeeReport:function(){-1==this.stepId?this.seeMode?this.generateReport():this.generatePerStepReport():this.generateReport(),this.report_visible=!0},generatePerStepReport:function(){var e=new Date(this.queryDate[0]).format("yyyy-MM-dd"),t=new Date(this.queryDate[1]).format("yyyy-MM-dd"),a=this.queryNode;"all"===a&&(a="全部节点");this.stepId;var n=this.nodeJob.xAxis.data,s=this.nodeJob.series[0].data,o=parseFloat((s.reduce((function(e,t){return parseFloat(e)+parseFloat(t)}))/s.length).toFixed(2)),r={step_name:n[0],amount:s[0]},i={step_name:n[0],amount:s[0]},l=[];s.forEach((function(e,t){if(e=parseFloat(e),e>r.amount&&(r.step_name=n[t],r.amount=e),e<i.amount&&(i.step_name=n[t],i.amount=e),e<90){var a={step_name:n[t],amount:e};l.push(a)}}));var c='<div style="color:#30475e;">查询时间：<b>'.concat(e,"</b> 至 <b>").concat(t,"</b></div>\n      <br/>\n      <div>查询节点：<b>").concat(a,"</b></div>\n      <br/>");c+='<div>所有步骤的平均成功率为：<span style="color:red"><b>'.concat(o,' %</b></span></div>\n      <br/>\n      <div>成功率最高的步骤为<span style="color:green"><b>').concat(r.step_name,'</b></span>\n      ：<span style="color:green"><b>').concat(r.amount,' %</b></span></div>\n      <br/>\n      <div>成功率最低的步骤为<span style="color:red"><b>').concat(i.step_name,'</b></span>\n      ：<span style="color:red"><b>').concat(i.amount," %</b></span></div>\n      <br/>\n      <div>可能需要注意的步骤如下（成功率低于90%）：</div>\n      "),l.forEach((function(e){c+='<br/><div><span style="color:red"><b>'.concat(e.step_name,":").concat(e.amount,"%</b></span></div>")})),this.report_content=c},generateReport:function(){var e=new Date(this.queryDate[0]).format("yyyy-MM-dd"),t=new Date(this.queryDate[1]).format("yyyy-MM-dd"),a=this.queryNode;"all"===a&&(a="全部节点");var n=this.nodeJob.xAxis.data,s=this.nodeJob.series[0].data,o=parseFloat((s.reduce((function(e,t){return parseFloat(e)+parseFloat(t)}))/s.length).toFixed(2)),r={date:n[0],amount:s[0]},i={date:n[0],amount:s[0]},l=[];s.forEach((function(e,t){if(e=parseFloat(e),e>r.amount&&(r.date=n[t],r.amount=e),e<i.amount&&(i.date=n[t],i.amount=e),e<90){var a={date:n[t],amount:e};l.push(a)}}));var c='<div style="color:#30475e;">查询时间：<b>'.concat(e,"</b> 至 <b>").concat(t,"</b></div>\n      <br/>\n      <div>查询节点：<b>").concat(a,"</b></div>\n      <br/>");c+='<div>平均成功率为：<span style="color:red"><b>'.concat(o,' %</b></span></div>\n      <br/>\n      <div>成功率最高的日期为<span style="color:green"><b>').concat(r.date,'</b></span>\n      :<span style="color:green"><b>').concat(r.amount,' %</b></span></div>\n      <br/>\n      <div>成功率最低的日期为<span style="color:red"><b>').concat(i.date,'</b></span>\n      :<span style="color:red"><b>').concat(i.amount," %</b></span></div>\n      <br/>\n      <div>可能需要注意的日期如下（成功率低于90%）：</div>\n      "),l.forEach((function(e){c+='<br/><div><span style="color:red"><b>'.concat(e.date,":").concat(e.amount,"%</b></span></div>")})),this.report_content=c},updateReportVisable:function(e){this.report_visible=e}},components:{DatePicker:w["a"],SuccessRateTable:m,Report:v["a"]},watch:{seeMode:function(){this.getStepsData()}}},S=R,M=(a("8617"),Object(h["a"])(S,x,_,!1,null,"5771f3d3",null)),q=M.exports,N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",[a("el-col",{attrs:{span:3}},[a("el-aside",{staticStyle:{"background-color":"#fff",height:"650px","overflow-x":"hidden"},attrs:{width:"96%"}},[a("el-menu",{attrs:{"default-openeds":["1"],"default-active":"all"},on:{select:e.menuSlect}},[a("el-submenu",{attrs:{index:"1"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-message"}),e._v("集群节点")]),a("el-menu-item",{attrs:{index:"all"}},[e._v("全部节点")]),e._l(e.nodeList,(function(t){return a("el-menu-item",{key:t.id,attrs:{index:t.domain}},[e._v(e._s(t.name))])}))],2)],1)],1)],1),a("el-col",{attrs:{span:20}},[a("DatePicker",{on:{getDate:e.getDate,handleSeeReport:e.handleSeeReport}}),a("el-row",{staticClass:"top"},[a("el-col",{attrs:{span:19}},[a("div",{staticClass:"block"},[a("chart",{directives:[{name:"loading",rawName:"v-loading",value:e.loading1,expression:"loading1"}],ref:"nodeJob",attrs:{options:e.nodeJob,"auto-resize":!0}})],1)]),a("el-col",{attrs:{span:5}},[a("SuccessRateTable",{attrs:{tableList:e.tableList}}),-1==e.provinceId?a("el-switch",{staticClass:"seemode",attrs:{"active-text":"省份总览","inactive-text":"分省份查看"},model:{value:e.seeMode,callback:function(t){e.seeMode=t},expression:"seeMode"}}):e._e()],1)],1)],1)],1),a("Report",{attrs:{title:e.report_title,content:e.report_content,drawer_visible:e.report_visible},on:{updateReportVisable:e.updateReportVisable}})],1)},k=[],J=a("a017"),L={data:function(){return{report_title:"分析报告",report_content:"",report_visible:!1,seeMode:!0,tableList:[],nodeList:[],queryDate:[],queryNode:"all",provinceId:-1,loading1:!1,nodeJob:{title:{text:"任务成功率",left:"center"},tooltip:{trigger:"item",formatter:"{b} : {c}%"},xAxis:{name:"日期",type:"category",data:[]},yAxis:{name:"成功率(%)",type:"value"},series:[{data:[],type:"line"}]}}},mounted:function(){this.setDefaultDate(),this.getAllNodeList()},methods:{getDate:function(e,t){null!=e&&2==e.length?(this.queryDate[0]=e[0],this.queryDate[1]=e[1]+864e5-1):this.setDefaultDate(),this.provinceId=t,this.getProvinceData(this.queryNode)},getAllNodeList:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("NodeJob/allNode");case 2:t=e.sent,a=t.data,this.nodeList=a,this.getProvinceData(this.queryNode);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),menuSlect:function(e){this.queryNode=e,this.getProvinceData(this.queryNode)},setDefaultDate:function(){var e=new Date(new Date((new Date).toLocaleDateString()).getTime()+864e5-1),t=Date.parse(e),a=Date.parse(new Date(e.getTime()-2592e6+1));this.queryDate=[a,t]},getProvinceData:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,n,s,o,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading1=!0,a={startTime:this.queryDate[0],endTime:this.queryDate[1],node:t,provinceId:this.provinceId,seeMode:this.seeMode},e.next=4,this.$http.get("successRate/province",{params:a});case 4:for(n=e.sent,s=n.data,console.log(s),s.forEach((function(e){e.amount*=100,e.amount=e.amount.toFixed(2)})),this.tableList=s,o=[],r=[],i=0;i<s.length;i++)o.push(s[i].day),r.push(s[i].amount);this.nodeJob.xAxis.data=o,this.nodeJob.series[0].data=r,this.seeMode||-1!=this.provinceId?(this.nodeJob.xAxis.name="日期",this.nodeJob.series[0].type="line"):(this.nodeJob.xAxis.name="省份",this.nodeJob.series[0].type="bar"),this.loading1=!1;case 16:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleSeeReport:function(){-1==this.provinceId?this.seeMode?this.generateReport():this.generatePerProvinceReport():this.generateReport(),this.report_visible=!0},generatePerProvinceReport:function(){var e=new Date(this.queryDate[0]).format("yyyy-MM-dd"),t=new Date(this.queryDate[1]).format("yyyy-MM-dd"),a=this.queryNode;"all"===a&&(a="全部节点");this.province_id;var n=this.nodeJob.xAxis.data,s=this.nodeJob.series[0].data,o=parseFloat((s.reduce((function(e,t){return parseFloat(e)+parseFloat(t)}))/s.length).toFixed(2)),r={province:n[0],amount:s[0]},i={province:n[0],amount:s[0]},l=[];s.forEach((function(e,t){if(e=parseFloat(e),e>r.amount&&(r.province=n[t],r.amount=e),e<i.amount&&(i.province=n[t],i.amount=e),e<90){var a={province:n[t],amount:e};l.push(a)}}));var c='<div style="color:#30475e;">查询时间：<b>'.concat(e,"</b> 至 <b>").concat(t,"</b></div>\n          <br/>\n          <div>查询节点：<b>").concat(a,"</b></div>\n          <br/>");c+='<div>平均成功率为：<span style="color:red"><b>'.concat(o,' %</b></span></div>\n          <br/>\n          <div>成功率最高的省份为<span style="color:green"><b>').concat(r.province,'</b></span>\n          : <span style="color:green"><b>').concat(r.amount,' %</b></span></div>\n          <br/>\n          <div>成功率最低的省份为<span style="color:red"><b>').concat(i.province,'</b></span>\n          : <span style="color:red"><b>').concat(i.amount," %</b></span></div>\n          <br/>\n          <div>可能需要注意的省份如下（成功率低于90%）：</div>\n          "),l.forEach((function(e){c+='<br/><div><span style="color:red"><b>'.concat(e.province,":").concat(e.amount,"%</b></span></div>")})),this.report_content=c},generateReport:function(){var e=new Date(this.queryDate[0]).format("yyyy-MM-dd"),t=new Date(this.queryDate[1]).format("yyyy-MM-dd"),a=this.queryNode;"all"===a&&(a="全部节点");var n=this.nodeJob.xAxis.data,s=this.nodeJob.series[0].data,o=parseFloat((s.reduce((function(e,t){return parseFloat(e)+parseFloat(t)}))/s.length).toFixed(2)),r={date:n[0],amount:s[0]},i={date:n[0],amount:s[0]},l=[];s.forEach((function(e,t){if(e=parseFloat(e),e>r.amount&&(r.date=n[t],r.amount=s[t]),e<i.amount&&(i.date=n[t],i.amount=s[t]),e<90){var a={date:n[t],amount:s[t]};l.push(a)}}));var c='<div style="color:#30475e;">查询时间：<b>'.concat(e,"</b> 至 <b>").concat(t,"</b></div>\n          <br/>\n          <div>查询节点：<b>").concat(a,"</b></div>\n          <br/>");c+='<div>任务平均成功率为：<span style="color:red"><b>'.concat(o,' %</b></span></div>\n          <br/>\n          <div>成功率最高的日期为<span style="color:green"><b>').concat(r.date,'</b></span>\n          : <span style="color:green"><b>').concat(r.amount,' %</b></span></div>\n          <br/>\n          <div>成功率最低的日期为<span style="color:red"><b>').concat(i.date,'</b></span>\n          : <span style="color:red"><b>').concat(i.amount," %</b></span></div>\n          <br/>\n          <div>可能需要注意的日期如下（成功率低于90%）：</div>\n          "),l.forEach((function(e){c+='<br/><div><span style="color:red"><b>'.concat(e.date,":").concat(e.amount,"%</b></span></div>")})),this.report_content=c},updateReportVisable:function(e){this.report_visible=e}},components:{DatePicker:J["a"],SuccessRateTable:m,Report:v["a"]},watch:{seeMode:function(){this.getProvinceData(this.queryNode)}}},F=L,A=(a("f231"),Object(h["a"])(F,N,k,!1,null,"20169608",null)),P=A.exports,V=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",[a("el-col",{attrs:{span:3}},[a("el-aside",{staticStyle:{"background-color":"#fff",height:"650px","overflow-x":"hidden"},attrs:{width:"96%"}},[a("el-menu",{attrs:{"default-openeds":["1"],"default-active":"all"},on:{select:e.menuSlect}},[a("el-submenu",{attrs:{index:"1"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-message"}),e._v("集群节点")]),a("el-menu-item",{attrs:{index:"all"}},[e._v("全部节点")]),e._l(e.nodeList,(function(t){return a("el-menu-item",{key:t.id,attrs:{index:t.domain}},[e._v(e._s(t.name))])}))],2)],1)],1)],1),a("el-col",{attrs:{span:20}},[a("DatePicker",{on:{getDate:e.getDate,handleSeeReport:e.handleSeeReport}}),a("el-row",{staticClass:"top"},[a("el-col",{attrs:{span:19}},[a("div",{staticClass:"block"},[a("chart",{directives:[{name:"loading",rawName:"v-loading",value:e.loading1,expression:"loading1"}],ref:"nodeJob",attrs:{options:e.nodeJob,"auto-resize":!0}})],1)]),a("el-col",{attrs:{span:5}},[a("SuccessRateTable",{attrs:{tableList:e.tableList}}),"all"==e.satelliteName?a("el-switch",{staticClass:"seemode",attrs:{"active-text":"卫星总览","inactive-text":"分卫星查看"},model:{value:e.seeMode,callback:function(t){e.seeMode=t},expression:"seeMode"}}):e._e()],1)],1)],1)],1),a("Report",{attrs:{title:e.report_title,content:e.report_content,drawer_visible:e.report_visible},on:{updateReportVisable:e.updateReportVisable}})],1)},$=[],E=a("d20d"),T={data:function(){return{report_title:"分析报告",report_content:"",report_visible:!1,seeMode:!0,tableList:[],nodeList:[],queryDate:[],queryNode:"all",satelliteName:"all",loading1:!1,nodeJob:{title:{text:"任务成功率统计",left:"center"},tooltip:{trigger:"item",formatter:"{b} : {c}%"},xAxis:{name:"日期",type:"category",data:[]},yAxis:{name:"成功率(%)",type:"value"},series:[{data:[],type:"line"}]}}},mounted:function(){this.setDefaultDate(),this.getAllNodeList()},methods:{getDate:function(e,t){null!=e&&2==e.length?(this.queryDate[0]=e[0],this.queryDate[1]=e[1]+864e5-1):this.setDefaultDate(),this.satelliteName=t,this.getSatelliteData(this.queryNode)},getAllNodeList:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("NodeJob/allNode");case 2:t=e.sent,a=t.data,this.nodeList=a,this.getSatelliteData(this.queryNode);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),menuSlect:function(e){this.queryNode=e,this.getSatelliteData(this.queryNode)},setDefaultDate:function(){var e=new Date(new Date((new Date).toLocaleDateString()).getTime()+864e5-1),t=Date.parse(e),a=Date.parse(new Date(e.getTime()-2592e6+1));this.queryDate=[a,t]},getSatelliteData:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,n,s,o,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading1=!0,a={startTime:this.queryDate[0],endTime:this.queryDate[1],node:t,satelliteName:this.satelliteName,seeMode:this.seeMode},e.next=4,this.$http.get("successRate/satellite",{params:a});case 4:for(n=e.sent,s=n.data,console.log(s),s.forEach((function(e){e.amount*=100,e.amount=e.amount.toFixed(2)})),this.tableList=s,o=[],r=[],i=0;i<s.length;i++)o.push(s[i].day),r.push(s[i].amount);this.nodeJob.xAxis.data=o,this.nodeJob.series[0].data=r,this.seeMode||"all"!=this.satelliteName?(this.nodeJob.xAxis.name="日期",this.nodeJob.series[0].type="line"):(this.nodeJob.xAxis.name="卫星",this.nodeJob.series[0].type="bar"),this.loading1=!1;case 16:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleSeeReport:function(){"all"==this.satelliteName?this.seeMode?this.generatePeport():this.generatePerSatelliteReport():this.generatePeport(),this.report_visible=!0},generatePerSatelliteReport:function(){var e=new Date(this.queryDate[0]).format("yyyy-MM-dd"),t=new Date(this.queryDate[1]).format("yyyy-MM-dd"),a=this.queryNode;"all"===a&&(a="全部节点");var n=this.nodeJob.xAxis.data,s=this.nodeJob.series[0].data,o=parseFloat((s.reduce((function(e,t){return parseFloat(e)+parseFloat(t)}))/s.length).toFixed(2)),r={sate_name:n[0],amount:s[0]},i={sate_name:n[0],amount:s[0]},l=[];s.forEach((function(e,t){if(e=parseFloat(e),e>r.amount&&(r.sate_name=n[t],r.amount=e),e<i.amount&&(i.sate_name=n[t],i.amount=e),e<90){var a={sate_name:n[t],amount:e};l.push(a)}}));var c='<div style="color:#30475e;">查询时间：<b>'.concat(e,"</b> 至 <b>").concat(t,"</b></div>\n          <br/>\n          <div>查询节点：<b>").concat(a,"</b></div>\n          <br/>");c+='<div>平均成功率为：<span style="color:red"><b>'.concat(o,' %</b></span></div>\n          <br/>\n          <div>成功率最高的卫星为<span style="color:green"><b>').concat(r.sate_name,'</b></span>\n          : <span style="color:green"><b>').concat(r.amount,' %</b></span></div>\n          <br/>\n          <div>成功率最低的卫星为<span style="color:red"><b>').concat(i.sate_name,'</b></span>\n          : <span style="color:red"><b>').concat(i.amount," %</b></span></div>\n          <br/>\n          <div>可能需要注意的卫星如下（成功率低于90%）：</div>\n          "),l.forEach((function(e){c+='<br/><div><span style="color:red"><b>'.concat(e.sate_name,":").concat(e.amount,"%</b></span></div>")})),this.report_content=c},generatePeport:function(){var e=new Date(this.queryDate[0]).format("yyyy-MM-dd"),t=new Date(this.queryDate[1]).format("yyyy-MM-dd"),a=this.queryNode;"all"===a&&(a="全部节点");var n=this.nodeJob.xAxis.data,s=this.nodeJob.series[0].data,o=parseFloat((s.reduce((function(e,t){return parseFloat(e)+parseFloat(t)}))/s.length).toFixed(2)),r={sate_name:n[0],amount:s[0]},i={sate_name:n[0],amount:s[0]},l=[];s.forEach((function(e,t){if(e=parseFloat(e),e>r.amount&&(r.sate_name=n[t],r.amount=e),e<i.amount&&(i.sate_name=n[t],i.amount=e),e<90){var a={sate_name:n[t],amount:e};l.push(a)}}));var c='<div style="color:#30475e;">查询时间：<b>'.concat(e,"</b> 至 <b>").concat(t,"</b></div>\n          <br/>\n          <div>查询节点：<b>").concat(a,"</b></div>\n          <br/>");c+='<div>平均成功率为：<span style="color:red"><b>'.concat(o,' %</b></span></div>\n          <br/>\n          <div>成功率最高的日期为<span style="color:green"><b>').concat(r.sate_name,'</b></span>\n          : <span style="color:green"><b>').concat(r.amount,' %</b></span></div>\n          <br/>\n          <div>成功率最低的日期为<span style="color:red"><b>').concat(i.sate_name,'</b></span>\n          : <span style="color:red"><b>').concat(i.amount," %</b></span></div>\n          <br/>\n          <div>可能需要注意的日期如下（成功率低于90%）：</div>\n          "),l.forEach((function(e){c+='<br/><div><span style="color:red"><b>'.concat(e.sate_name,":").concat(e.amount,"%</b></span></div>")})),this.report_content=c},updateReportVisable:function(e){this.report_visible=e}},components:{DatePicker:E["a"],SuccessRateTable:m,Report:v["a"]},watch:{seeMode:function(){this.getSatelliteData(this.queryNode)}}},C=T,j=(a("3a49"),Object(h["a"])(C,V,$,!1,null,"3fb16000",null)),O=j.exports,z={data:function(){return{activeName:"first"}},components:{SingleNode:D,Steps:q,Province:P,Satellite:O},methods:{handleClick:function(){}}},I=z,H=(a("5176"),Object(h["a"])(I,n,s,!1,null,"7a0cb586",null));t["default"]=H.exports},d20d:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-card",{attrs:{shadow:"always"}},[a("el-date-picker",{attrs:{size:"small",type:"daterange","value-format":"timestamp","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.dateValues,callback:function(t){e.dateValues=t},expression:"dateValues"}}),e._v("\n         \n    "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.step,callback:function(t){e.step=t},expression:"step"}},[a("el-option",{attrs:{value:"all",label:"全部卫星"}}),e._l(e.stepList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.satellite_name,value:e.satellite_name}})}))],2),e._v("\n         \n    "),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:e.reverseMessage}},[e._v("查找")]),e._v("\n       \n    "),a("el-button",{attrs:{type:"success",size:"small",icon:"el-icon-tickets"},on:{click:e.handleSeeReport}},[e._v("查看分析报告")])],1)],1)},s=[],o=(a("96cf"),a("1da1")),r={data:function(){return{stepList:[],dateValues:"",step:""}},mounted:function(){this.getStepsListData()},methods:{handleSeeReport:function(){this.$emit("handleSeeReport")},reverseMessage:function(){this.$emit("getDate",this.dateValues,this.step)},getStepsListData:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("SatelliteConfig/AllSatellite");case 2:t=e.sent,a=t.data,console.log(a),this.stepList=a,this.step="all";case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},i=r,l=a("2877"),c=Object(l["a"])(i,n,s,!1,null,null,null);t["a"]=c.exports},d72c:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-card",{attrs:{shadow:"always"}},[a("el-date-picker",{attrs:{size:"small",type:"daterange","value-format":"timestamp","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.dateValues,callback:function(t){e.dateValues=t},expression:"dateValues"}}),e._v("\n          \n      "),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:e.reverseMessage}},[e._v("查找")]),a("el-button",{attrs:{type:"success",size:"small",icon:"el-icon-tickets"},on:{click:e.handleSeeReport}},[e._v("查看分析报告")])],1)],1)},s=[],o={data:function(){return{dateValues:""}},methods:{reverseMessage:function(){this.$emit("getDate",this.dateValues)},handleSeeReport:function(){this.$emit("handleSeeReport")}}},r=o,i=a("2877"),l=Object(i["a"])(r,n,s,!1,null,null,null);t["a"]=l.exports},f231:function(e,t,a){"use strict";a("4b3c")}}]);